<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GETIT ì£¼ì‹ê²Œì„ ê´€ë¦¬ì í˜ì´ì§€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3B82F6',
              success: '#10B981',
              warning: '#F59E0B',
              danger: '#EF4444',
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-gray-50">
    <div class="min-h-screen">
      <!-- í—¤ë” -->
      <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex justify-between items-center py-6">
            <div class="flex items-center">
              <h1 class="text-2xl font-bold text-gray-900">
                ğŸ“Š GETIT ì£¼ì‹ê²Œì„ ê´€ë¦¬ì
              </h1>
            </div>
            <div class="flex items-center space-x-4">
              <div class="flex items-center space-x-2">
                <label class="text-sm font-medium text-gray-700"
                  >ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:</label
                >
                <input
                  type="password"
                  id="adminPassword"
                  value="admin123"
                  class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                />
              </div>
              <button
                onclick="testConnection()"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 transition-colors"
              >
                ì—°ê²° í…ŒìŠ¤íŠ¸
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- ë©”ì¸ ì»¨í…ì¸  -->
      <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- ëŒ€ì‹œë³´ë“œ ì¹´ë“œ -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div class="bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
              <div class="flex items-center">
                <div class="flex-shrink-0">
                  <div
                    class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"
                  >
                    <span class="text-white text-lg">ğŸ“ˆ</span>
                  </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                  <dl>
                    <dt class="text-sm font-medium text-gray-500 truncate">
                      ì´ ì£¼ì‹ ì¢…ëª©
                    </dt>
                    <dd
                      id="totalStocks"
                      class="text-lg font-medium text-gray-900"
                    >
                      -
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
              <div class="flex items-center">
                <div class="flex-shrink-0">
                  <div
                    class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"
                  >
                    <span class="text-white text-lg">ğŸ“°</span>
                  </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                  <dl>
                    <dt class="text-sm font-medium text-gray-500 truncate">
                      ì´ ë‰´ìŠ¤
                    </dt>
                    <dd
                      id="totalNews"
                      class="text-lg font-medium text-gray-900"
                    >
                      -
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
              <div class="flex items-center">
                <div class="flex-shrink-0">
                  <div
                    class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center"
                  >
                    <span class="text-white text-lg">ğŸš€</span>
                  </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                  <dl>
                    <dt class="text-sm font-medium text-gray-500 truncate">
                      ìƒìŠ¹ ì¢…ëª©
                    </dt>
                    <dd
                      id="risingStocks"
                      class="text-lg font-medium text-gray-900"
                    >
                      -
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
              <div class="flex items-center">
                <div class="flex-shrink-0">
                  <div
                    class="w-8 h-8 bg-red-500 rounded-md flex items-center justify-center"
                  >
                    <span class="text-white text-lg">ğŸ“‰</span>
                  </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                  <dl>
                    <dt class="text-sm font-medium text-gray-500 truncate">
                      í•˜ë½ ì¢…ëª©
                    </dt>
                    <dd
                      id="fallingStocks"
                      class="text-lg font-medium text-gray-900"
                    >
                      -
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="bg-white shadow rounded-lg">
          <div class="border-b border-gray-200">
            <nav class="-mb-px flex space-x-8 px-6">
              <button
                onclick="showTab('stocks')"
                id="stocksTab"
                class="tab-button py-4 px-1 border-b-2 border-primary text-sm font-medium text-primary"
              >
                ì£¼ì‹ ê´€ë¦¬
              </button>
              <button
                onclick="showTab('news')"
                id="newsTab"
                class="tab-button py-4 px-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"
              >
                ë‰´ìŠ¤ ê´€ë¦¬
              </button>
              <button
                onclick="showTab('admin')"
                id="adminTab"
                class="tab-button py-4 px-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300"
              >
                ê´€ë¦¬ ë„êµ¬
              </button>
            </nav>
          </div>

          <!-- ì£¼ì‹ ê´€ë¦¬ íƒ­ -->
          <div id="stocksContent" class="tab-content p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-medium text-gray-900">ì£¼ì‹ ì¢…ëª© ê´€ë¦¬</h3>
              <button
                onclick="showCreateStockModal()"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 transition-colors"
              >
                ìƒˆ ì£¼ì‹ ì¶”ê°€
              </button>
            </div>
            <div id="stocksList" class="space-y-4">
              <!-- ì£¼ì‹ ëª©ë¡ì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
          </div>

          <!-- ë‰´ìŠ¤ ê´€ë¦¬ íƒ­ -->
          <div id="newsContent" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-medium text-gray-900">ë‰´ìŠ¤ ê´€ë¦¬</h3>
              <button
                onclick="showCreateNewsModal()"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 transition-colors"
              >
                ìƒˆ ë‰´ìŠ¤ ì¶”ê°€
              </button>
            </div>
            <div id="newsList" class="space-y-4">
              <!-- ë‰´ìŠ¤ ëª©ë¡ì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
          </div>

          <!-- ê´€ë¦¬ ë„êµ¬ íƒ­ -->
          <div id="adminContent" class="tab-content hidden p-6">
            <h3 class="text-lg font-medium text-gray-900 mb-6">ê´€ë¦¬ ë„êµ¬</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="bg-gray-50 p-6 rounded-lg">
                <h4 class="text-md font-medium text-gray-900 mb-4">
                  ì£¼ì‹ ê°€ê²© ì‹œë®¬ë ˆì´ì…˜
                </h4>
                <p class="text-sm text-gray-600 mb-4">
                  ëª¨ë“  ì£¼ì‹ì˜ ê°€ê²©ì„ ëœë¤í•˜ê²Œ ë³€ê²½í•©ë‹ˆë‹¤.
                </p>
                <button
                  onclick="runStockSimulation()"
                  class="px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition-colors"
                >
                  ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
                </button>
              </div>
              <div class="bg-gray-50 p-6 rounded-lg">
                <h4 class="text-md font-medium text-gray-900 mb-4">
                  ë°ì´í„° ë°±ì—…
                </h4>
                <p class="text-sm text-gray-600 mb-4">
                  í˜„ì¬ ë°ì´í„° ìƒíƒœë¥¼ ë°±ì—…í•©ë‹ˆë‹¤.
                </p>
                <button
                  onclick="backupData()"
                  class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors"
                >
                  ë°±ì—… ì‹¤í–‰
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- ëª¨ë‹¬ë“¤ -->
    <div
      id="createStockModal"
      class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50"
    >
      <div class="flex items-center justify-center min-h-screen">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
          <h3 class="text-lg font-medium text-gray-900 mb-4">ìƒˆ ì£¼ì‹ ì¶”ê°€</h3>
          <form id="createStockForm" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ì£¼ì‹ëª…</label
              >
              <input
                type="text"
                name="name"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ì‹¬ë³¼</label
              >
              <input
                type="text"
                name="symbol"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >í˜„ì¬ê°€</label
              >
              <input
                type="number"
                name="currentPrice"
                required
                min="0"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ê±°ë˜ëŸ‰</label
              >
              <input
                type="number"
                name="volume"
                required
                min="0"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              />
            </div>
            <div class="flex justify-end space-x-3">
              <button
                type="button"
                onclick="hideCreateStockModal()"
                class="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"
              >
                ì·¨ì†Œ
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700"
              >
                ì¶”ê°€
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div
      id="createNewsModal"
      class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50"
    >
      <div class="flex items-center justify-center min-h-screen">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
          <h3 class="text-lg font-medium text-gray-900 mb-4">ìƒˆ ë‰´ìŠ¤ ì¶”ê°€</h3>
          <form id="createNewsForm" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ì œëª©</label
              >
              <input
                type="text"
                name="title"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ìš”ì•½</label
              >
              <textarea
                name="summary"
                required
                rows="2"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              ></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ë‚´ìš©</label
              >
              <textarea
                name="content"
                required
                rows="4"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              ></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700"
                >ì¹´í…Œê³ ë¦¬</label
              >
              <select
                name="category"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
              >
                <option value="economy">ê²½ì œ</option>
                <option value="technology">ê¸°ìˆ </option>
                <option value="politics">ì •ì¹˜</option>
                <option value="sports">ìŠ¤í¬ì¸ </option>
              </select>
            </div>
            <div class="flex justify-end space-x-3">
              <button
                type="button"
                onclick="hideCreateNewsModal()"
                class="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"
              >
                ì·¨ì†Œ
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700"
              >
                ì¶”ê°€
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      const API_BASE = window.location.origin + '/api';
      let adminPassword = 'admin123';

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
      document.addEventListener('DOMContentLoaded', function () {
        loadDashboard();
        loadStocks();
        loadNews();

        // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸
        document
          .getElementById('adminPassword')
          .addEventListener('change', function (e) {
            adminPassword = e.target.value;
          });
      });

      // íƒ­ ì „í™˜
      function showTab(tabName) {
        // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
        document.querySelectorAll('.tab-button').forEach((btn) => {
          btn.classList.remove('border-primary', 'text-primary');
          btn.classList.add('border-transparent', 'text-gray-500');
        });

        // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
        document.querySelectorAll('.tab-content').forEach((content) => {
          content.classList.add('hidden');
        });

        // ì„ íƒëœ íƒ­ í™œì„±í™”
        document
          .getElementById(tabName + 'Tab')
          .classList.remove('border-transparent', 'text-gray-500');
        document
          .getElementById(tabName + 'Tab')
          .classList.add('border-primary', 'text-primary');
        document.getElementById(tabName + 'Content').classList.remove('hidden');
      }

      // ì—°ê²° í…ŒìŠ¤íŠ¸
      async function testConnection() {
        try {
          const response = await fetch(`${API_BASE}/stocks`);
          if (response.ok) {
            alert('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ!');
          } else {
            alert('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ' + error.message);
        }
      }

      // ëŒ€ì‹œë³´ë“œ ë¡œë“œ
      async function loadDashboard() {
        try {
          const response = await fetch(`${API_BASE}/admin/dashboard`, {
            headers: {
              'x-admin-password': adminPassword,
            },
          });

          if (response.ok) {
            const data = await response.json();
            document.getElementById('totalStocks').textContent =
              data.stocks.total;
            document.getElementById('totalNews').textContent = data.news.total;
            document.getElementById('risingStocks').textContent =
              data.stocks.rising;
            document.getElementById('fallingStocks').textContent =
              data.stocks.falling;
          }
        } catch (error) {
          console.error('ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
      }

      // ì£¼ì‹ ëª©ë¡ ë¡œë“œ
      async function loadStocks() {
        try {
          const response = await fetch(`${API_BASE}/stocks`);
          if (response.ok) {
            const stocks = await response.json();
            displayStocks(stocks);
          }
        } catch (error) {
          console.error('ì£¼ì‹ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
      }

      // ì£¼ì‹ í‘œì‹œ
      function displayStocks(stocks) {
        const container = document.getElementById('stocksList');
        container.innerHTML = stocks
          .map(
            (stock) => `
                <div class="bg-white border rounded-lg p-4 shadow-sm">
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="text-lg font-medium text-gray-900">${stock.name}</h4>
                            <p class="text-sm text-gray-500">${stock.symbol}</p>
                            <div class="flex items-center space-x-4 mt-2">
                                <span class="text-lg font-bold">â‚©${stock.currentPrice.toLocaleString()}</span>
                                <span class="text-sm ${stock.change >= 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${stock.change >= 0 ? '+' : ''}${stock.change.toLocaleString()} (${stock.changePercent.toFixed(2)}%)
                                </span>
                                <span class="text-sm text-gray-500">ê±°ë˜ëŸ‰: ${stock.volume.toLocaleString()}</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="editStock('${stock.id}')" 
                                    class="px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200">
                                ìˆ˜ì •
                            </button>
                            <button onclick="deleteStock('${stock.id}')" 
                                    class="px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">
                                ì‚­ì œ
                            </button>
                        </div>
                    </div>
                </div>
            `,
          )
          .join('');
      }

      // ë‰´ìŠ¤ ëª©ë¡ ë¡œë“œ
      async function loadNews() {
        try {
          const response = await fetch(`${API_BASE}/news`);
          if (response.ok) {
            const news = await response.json();
            displayNews(news);
          }
        } catch (error) {
          console.error('ë‰´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
      }

      // ë‰´ìŠ¤ í‘œì‹œ
      function displayNews(news) {
        const container = document.getElementById('newsList');
        container.innerHTML = news
          .map(
            (item) => `
                <div class="bg-white border rounded-lg p-4 shadow-sm">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">${getCategoryName(item.category)}</span>
                                <span class="px-2 py-1 ${item.isPublished ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'} text-xs rounded-full">
                                    ${item.isPublished ? 'ë°œí–‰ë¨' : 'ë¯¸ë°œí–‰'}
                                </span>
                            </div>
                            <h4 class="text-lg font-medium text-gray-900">${item.title}</h4>
                            <p class="text-sm text-gray-600 mt-1">${item.summary}</p>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <button onclick="toggleNewsPublish('${item.id}', ${!item.isPublished})" 
                                    class="px-3 py-1 ${item.isPublished ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700'} rounded text-sm hover:bg-yellow-200">
                                ${item.isPublished ? 'ë¯¸ë°œí–‰' : 'ë°œí–‰'}
                            </button>
                            <button onclick="deleteNews('${item.id}')" 
                                    class="px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">
                                ì‚­ì œ
                            </button>
                        </div>
                    </div>
                </div>
            `,
          )
          .join('');
      }

      // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë³€í™˜
      function getCategoryName(category) {
        const categories = {
          economy: 'ê²½ì œ',
          technology: 'ê¸°ìˆ ',
          politics: 'ì •ì¹˜',
          sports: 'ìŠ¤í¬ì¸ ',
        };
        return categories[category] || category;
      }

      // ì£¼ì‹ ìƒì„± ëª¨ë‹¬ í‘œì‹œ/ìˆ¨ê¹€
      function showCreateStockModal() {
        document.getElementById('createStockModal').classList.remove('hidden');
      }

      function hideCreateStockModal() {
        document.getElementById('createStockModal').classList.add('hidden');
        document.getElementById('createStockForm').reset();
      }

      // ë‰´ìŠ¤ ìƒì„± ëª¨ë‹¬ í‘œì‹œ/ìˆ¨ê¹€
      function showCreateNewsModal() {
        document.getElementById('createNewsModal').classList.remove('hidden');
      }

      function hideCreateNewsModal() {
        document.getElementById('createNewsModal').classList.add('hidden');
        document.getElementById('createNewsForm').reset();
      }

      // ì£¼ì‹ ìƒì„± í¼ ì œì¶œ
      document
        .getElementById('createStockForm')
        .addEventListener('submit', async function (e) {
          e.preventDefault();
          const formData = new FormData(e.target);
          const stockData = {
            name: formData.get('name'),
            symbol: formData.get('symbol'),
            currentPrice: parseInt(formData.get('currentPrice')),
            volume: parseInt(formData.get('volume')),
          };

          try {
            const response = await fetch(`${API_BASE}/stocks`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'x-admin-password': adminPassword,
              },
              body: JSON.stringify(stockData),
            });

            if (response.ok) {
              alert('ì£¼ì‹ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
              hideCreateStockModal();
              loadStocks();
              loadDashboard();
            } else {
              alert('ì£¼ì‹ ì¶”ê°€ ì‹¤íŒ¨');
            }
          } catch (error) {
            alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
          }
        });

      // ë‰´ìŠ¤ ìƒì„± í¼ ì œì¶œ
      document
        .getElementById('createNewsForm')
        .addEventListener('submit', async function (e) {
          e.preventDefault();
          const formData = new FormData(e.target);
          const newsData = {
            title: formData.get('title'),
            summary: formData.get('summary'),
            content: formData.get('content'),
            category: formData.get('category'),
          };

          try {
            const response = await fetch(`${API_BASE}/news`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'x-admin-password': adminPassword,
              },
              body: JSON.stringify(newsData),
            });

            if (response.ok) {
              alert('ë‰´ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
              hideCreateNewsModal();
              loadNews();
              loadDashboard();
            } else {
              alert('ë‰´ìŠ¤ ì¶”ê°€ ì‹¤íŒ¨');
            }
          } catch (error) {
            alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
          }
        });

      // ì£¼ì‹ ì‚­ì œ
      async function deleteStock(id) {
        if (!confirm('ì •ë§ë¡œ ì´ ì£¼ì‹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

        try {
          const response = await fetch(`${API_BASE}/stocks/${id}`, {
            method: 'DELETE',
            headers: {
              'x-admin-password': adminPassword,
            },
          });

          if (response.ok) {
            alert('ì£¼ì‹ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            loadStocks();
            loadDashboard();
          } else {
            alert('ì£¼ì‹ ì‚­ì œ ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
        }
      }

      // ë‰´ìŠ¤ ì‚­ì œ
      async function deleteNews(id) {
        if (!confirm('ì •ë§ë¡œ ì´ ë‰´ìŠ¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

        try {
          const response = await fetch(`${API_BASE}/news/${id}`, {
            method: 'DELETE',
            headers: {
              'x-admin-password': adminPassword,
            },
          });

          if (response.ok) {
            alert('ë‰´ìŠ¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            loadNews();
            loadDashboard();
          } else {
            alert('ë‰´ìŠ¤ ì‚­ì œ ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
        }
      }

      // ë‰´ìŠ¤ ë°œí–‰ ìƒíƒœ í† ê¸€
      async function toggleNewsPublish(id, isPublished) {
        try {
          const response = await fetch(`${API_BASE}/news/${id}/publish`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
              'x-admin-password': adminPassword,
            },
            body: JSON.stringify({ isPublished }),
          });

          if (response.ok) {
            alert(
              `ë‰´ìŠ¤ê°€ ${isPublished ? 'ë°œí–‰' : 'ë¯¸ë°œí–‰'} ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!`,
            );
            loadNews();
            loadDashboard();
          } else {
            alert('ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
        }
      }

      // ì£¼ì‹ ê°€ê²© ì‹œë®¬ë ˆì´ì…˜
      async function runStockSimulation() {
        if (!confirm('ì£¼ì‹ ê°€ê²© ì‹œë®¬ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

        try {
          const response = await fetch(`${API_BASE}/stocks/simulate`, {
            method: 'POST',
            headers: {
              'x-admin-password': adminPassword,
            },
          });

          if (response.ok) {
            alert('ì‹œë®¬ë ˆì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
            loadStocks();
            loadDashboard();
          } else {
            alert('ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
        }
      }

      // ë°ì´í„° ë°±ì—…
      async function backupData() {
        try {
          const response = await fetch(`${API_BASE}/admin/backup`, {
            method: 'POST',
            headers: {
              'x-admin-password': adminPassword,
            },
          });

          if (response.ok) {
            const data = await response.json();
            alert(
              `ë°±ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì£¼ì‹: ${data.stocksCount}ê°œ\në‰´ìŠ¤: ${data.newsCount}ê°œ`,
            );
          } else {
            alert('ë°±ì—… ì‹¤íŒ¨');
          }
        } catch (error) {
          alert('ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
        }
      }
    </script>
  </body>
</html>
